# -*- coding: utf-8 -*-
"""AI промпты для генерации семейной книги"""

BOOK_OUTLINE_PROMPT = """Ты - талантливый семейный историк и писатель. Создай увлекательную структуру для книги о семейной истории на основе предоставленных данных.

ДАННЫЕ СЕМЬИ:
{family_context}

ТРЕБОВАНИЯ:
1. Создай захватывающее название для книги
2. Напиши введение, которое погружает читателя в историю семьи (2-3 абзаца)
3. Организуй главы по темам, событиям или эпохам (НЕ просто по людям)
4. Каждая глава должна иметь драматическую структуру: завязка, развитие, кульминация
5. Сфокусируйся на связях между людьми, ключевых моментах и семейных традициях
6. Если есть истории - вплети их в повествование
7. Укажи, какие родственники должны появиться в каждой главе

Ответь ТОЛЬКО в формате JSON:
{{
  "title": "Название книги",
  "introduction": "Текст введения (2-3 абзаца)",
  "chapters": [
    {{
      "title": "Название главы 1",
      "theme": "О чём эта глава",
      "relatives_to_include": [1, 2, 3],
      "key_events": ["событие1", "событие2"],
      "narrative_arc": "Краткое описание сюжетной линии"
    }}
  ],
  "conclusion_theme": "Что должно быть в заключении"
}}

Язык ответа: {language}
"""

CHAPTER_WRITING_PROMPT = """Ты - талантливый семейный историк и писатель. Напиши увлекательную главу для семейной книги.

ТЕМА ГЛАВЫ: {chapter_theme}
НАЗВАНИЕ ГЛАВЫ: {chapter_title}

РОДСТВЕННИКИ В ЭТОЙ ГЛАВЕ:
{relatives_data}

ДОСТУПНЫЕ ИСТОРИИ И КОНТЕКСТ:
{stories_context}

СВЯЗИ МЕЖДУ ЭТИМИ РОДСТВЕННИКАМИ:
{relationships_context}

ТРЕБОВАНИЯ:
1. Пиши в увлекательном нарративном стиле, НЕ сухой список фактов
2. Используй приёмы драматургии: завязка, нарастание, кульминация, развязка
3. Добавь чувственные детали и эмоциональные моменты
4. Свяжи индивидуальные истории с общими семейными темами
5. Если есть даты - вплети их естественно в повествование
6. Длина: примерно 500-800 слов
7. Закончи плавным переходом к следующим событиям

Язык: {language}
Стиль: {style}
- classic = формальный, элегантный, традиционный
- modern = современный, разговорный, лёгкий
- vintage = ностальгический, поэтичный, с нотками старины

Напиши ТОЛЬКО текст главы, без заголовка и метаданных.
"""

TIMELINE_PROMPT = """Создай хронологию ключевых событий для этой семьи.

ДАННЫЕ СЕМЬИ:
{family_context}

Извлеки и организуй:
- Даты рождения
- Даты смерти
- Свадьбы (из связей типа spouse/husband/wife)
- Любые даты из историй

Ответь ТОЛЬКО в формате JSON массива:
[
  {{"year": 1950, "event": "Описание события", "relative_ids": [1, 2]}}
]

Сортируй по году. Язык: {language}
"""

CONCLUSION_PROMPT = """Напиши проникновенное заключение для семейной книги.

ТЕМА: {theme}
КРАТКИЙ ОБЗОР СЕМЬИ: {family_overview}

Требования:
- Подведи итог семейного пути
- Отрази общие ценности и традиции
- Посмотри в будущее с надеждой
- 2-3 абзаца
- Язык: {language}

Напиши ТОЛЬКО текст заключения.
"""
